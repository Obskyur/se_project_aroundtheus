!function(){"use strict";const e={};class t{constructor(e,t,s,i,n){this._data=e,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=i,this._handleLikeClick=n,this._cardElement=document.querySelector(`${this._cardSelector}`).content.firstElementChild.cloneNode(!0),this._imageElement=this._cardElement.querySelector(".card__image"),this._descriptionElement=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button")}getData(){return this._data}getElement(){return this._setCardValues(),this._setEventListeners(),this._cardElement}setLike(){this._data.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_handleDelete(e){this._handleDeleteClick(e)}_handleLike(e){e._data.isLiked=!e._data.isLiked,this._handleLikeClick(e)}_setCardValues(){this._imageElement.src=this._data.link,this._imageElement.alt=this._data.name,this._descriptionElement.textContent=this._data.name,this._data.isLiked&&this._likeButton.classList.add("card__like-button_active")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLike(this))),this._deleteButton.addEventListener("click",(()=>this._handleDelete(this))),this._imageElement.addEventListener("click",(()=>this._handleImageClick(this)))}}class s{constructor(e,t){this._settings=e,this._formEl=t,this._inputFields=[...t.querySelectorAll(this._settings.inputSelector)],this._submitButton=t.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._setEventListeners()}resetValidation(){this._toggleButtonState(this._inputFields,this._submitButton,this._settings),this._inputFields.forEach((e=>{this._hideInputError(e)}))}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.classList.add(this._settings.errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalid(e){return!e.every((e=>e.validity.valid))}_setEventListeners(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._inputFields.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalid(this._inputFields)?this._disableButton():this._enableButton()}}class i{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t),this.renderItems()}addItem(e){this._items.unshift(e),this.renderItem(e,!1)}_clear(){this._container.innerHTML=""}deleteItem(e){this._items.splice(this._items.findIndex((t=>t._id==e._id)),1)}renderItem(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this._container.append(this._renderer(e)):this._container.prepend(this._renderer(e))}renderItems(){this._clear(),this._items.forEach((e=>{this.renderItem(e,!0)}))}setItems(e){this._items=e}}class n{constructor(e){this._popup=document.querySelector(e)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup__close")||e.target.classList.contains("popup_opened"))&&this.close()}))}}class r extends n{constructor(e,t){super(e),this._popupForm=this._popup.querySelector(".popup__form"),this._inputs=this._popupForm.querySelectorAll(".popup__input"),this._handleFormSubmit=t,this._submitBtn=this._popupForm.querySelector(".popup__button"),this._submitBtnText=this._submitBtn.textContent,this.setEventListeners()}open(){super.open(),setTimeout((()=>this._inputs[0].focus()),700)}renderLoading(e,t){this._submitBtn.textContent=e?t:this._submitBtnText}reset(){this._popupForm.reset()}setEventListeners=()=>{super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))};setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}}const o=new class{constructor(e,t,s){this._profImage=document.querySelector(e),this._profName=document.querySelector(t),this._occupation=document.querySelector(s)}getUserInfo(){return{name:this._profName.textContent,occupation:this._occupation.textContent}}setUserImage(e){this._profImage.src=e}setUserInfo(e,t){this._profName.textContent=e,this._occupation.textContent=t}}(".profile__image",".profile__title",".profile__description"),a=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__image-update"),d=document.querySelector(".profile__add-button");a.addEventListener("click",(()=>{const{name:t,occupation:s}=o.getUserInfo();h.renderLoading(!1),h.open(),h.setInputValues({title:t,description:s}),e["edit-profile-form"].resetValidation()})),u.addEventListener("click",(()=>{l.renderLoading(!1),l.open(),e["edit-profile-image-form"].resetValidation()})),d.addEventListener("click",(()=>{_.open(),e["add-card-form"].resetValidation()}));const h=new r("#edit-profile-popup",(function(e){let{title:t,description:s}=e;E((function(){return k.setUser({name:t,about:s}).then((e=>{let{name:t,about:s}=e;return o.setUserInfo(t,s)}))}),h)})),l=new r("#edit-profile-image-popup",(function(e){let{url:t}=e;E((function(){return k.setUserPicture(t).then((()=>o.setUserImage(t)))}),l)})),_=new r("#add-card-popup",(function(e){let{title:t,url:s}=e;E((function(){return k.addCard({name:t,link:s}).then((e=>p.addItem(e)))}),_)})),c=new class extends n{constructor(e,t){super(e),this._popupForm=this._popup.querySelector(".popup__form"),this._handleFormSubmit=t,this._submitBtn=this._popupForm.querySelector(".popup__button"),this._submitBtnText=this._submitBtn.textContent,this.setEventListeners()}renderLoading(e,t){this._submitBtn.textContent=e?t:this._submitBtnText}reset(){this._popupForm.reset()}setEventListeners=()=>{super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}("#confirm-delete-popup",(function(){E((function(){return k.deleteCard(m).then((()=>{p.deleteItem(m),p.renderItems()}))}),c,"Deleting...")}));let p,m;const g=new class extends n{constructor(e){super(e),this._imageElement=this._popup.querySelector(".popup__image"),this._captionElement=this._popup.querySelector(".popup__caption"),this.setEventListeners()}open(e){let{name:t,link:s}=e;super.open(),this._captionElement.textContent=t,this._imageElement.alt=t,this._imageElement.src=s}}("#image-popup");function E(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.renderLoading(!0,s),e().then((()=>{t.close(),t.reset()})).catch(console.error).finally((()=>t.renderLoading(!1)))}function f(e){return new t(e,"#card-template",b,L,v).getElement()}function L(e){m=e.getData(),c.renderLoading(!1),c.open()}function b(e){g.open(e.getData())}function v(e){m=e.getData(),k.toggleLike(m).then((()=>e.setLike())).catch(console.error)}var S;S={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},[...document.querySelectorAll(S.formSelector)].forEach((t=>{const i=new s(S,t),n=t.getAttribute("name");e[n]=i,i.enableValidation()}));const k=new class{constructor(e){this._baseURL=e.baseURL,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._handleResponse)}addCard(e){return this._request(`${this._baseURL}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)})}deleteCard(e){return this._request(`${this._baseURL}/cards/${e._id}`,{method:"DELETE",headers:this._headers})}getCards(){return this._request(`${this._baseURL}/cards`,{method:"GET",headers:this._headers})}getPageInfo(){return Promise.all([this.getCards(),this.getUser()])}getUser(){return this._request(`${this._baseURL}/users/me`,{method:"GET",headers:this._headers})}setUser(e){return this._request(`${this._baseURL}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)})}setUserPicture(e){return this._request(`${this._baseURL}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}toggleLike(e){return this._request(`${this._baseURL}/cards/${e._id}/likes`,{method:e.isLiked?"PUT":"DELETE",headers:this._headers})}}({baseURL:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f88f7f13-d094-4973-ab37-f03c8d3d09a5","Content-Type":"application/json"}});k.getPageInfo().then((e=>{let[t,s]=e;o.setUserImage(s.avatar),o.setUserInfo(s.name,s.about),p=new i({items:t,renderer:f},".cards__list")})).catch(console.error)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyrilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBDQVJEUyDilIJcclxuIOKVmOKVkOKVkOKVkOKVkOKVkOKVkOKVkCovXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIFZBTElEQVRPUiDilIJcclxuIOKVmOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCovXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgLy8qIFBhc3NlZCB2YWx1ZXM6XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIC8vKiBQUklWQVRFIERPTSBNRU1CRVJTOlxyXG4gICAgLy8gRE9NIENhcmQgRWxlbWVudFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9jYXJkU2VsZWN0b3J9YClcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgLy8gRE9NIGltYWdlIGVsZW1lbnRcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICAvLyBET00gdGl0bGUgZWxlbWVudFxyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIC8vIERPTSBsaWtlIGJ1dHRvbiBlbGVtZW50XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIC8vIERPTSBkZWxldGUgYnV0dG9uIGVsZW1lbnRcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldERhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLl9zZXRDYXJkVmFsdWVzKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0TGlrZSgpIHtcclxuICAgIHRoaXMuX2RhdGEuaXNMaWtlZFxyXG4gICAgICA/IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxyXG4gICAgICA6IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGUoY2FyZCkge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soY2FyZCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZShjYXJkKSB7XHJcbiAgICBjYXJkLl9kYXRhLmlzTGlrZWQgPSAhY2FyZC5fZGF0YS5pc0xpa2VkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKGNhcmQpO1xyXG4gIH1cclxuXHJcbiAgX3NldENhcmRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIGlmICh0aGlzLl9kYXRhLmlzTGlrZWQpXHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIExpa2UgYnV0dG9uXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlKHRoaXMpKTtcclxuXHJcbiAgICAvLyBEZWxldGUgYnV0dG9uXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBJbWFnZVxyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsO1xyXG4gICAgLy8gRmluZCBGb3JtIEZpZWxkc1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBbXHJcbiAgICAgIC4uLmZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXHJcbiAgICAgIHRoaXMuX2lucHV0RmllbGRzLFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24sXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIElOUFVUIEZJRUxEIEZVTkNUSU9OUyDilIJcclxuIOKVmOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCovXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZChpbnB1dEZpZWxkcykge1xyXG4gICAgcmV0dXJuICFpbnB1dEZpZWxkcy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBTdWJtaXQgTGlzdGVuZXJcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBvbiBJbnB1dCBMaXN0ZW5lclxyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIEJVVFRPTiBGVU5DVElPTlMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAqL1xyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZCh0aGlzLl9pbnB1dEZpZWxkcykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShjYXJkT2JqKSB7XHJcbiAgICB0aGlzLl9pdGVtcy51bnNoaWZ0KGNhcmRPYmopO1xyXG4gICAgdGhpcy5yZW5kZXJJdGVtKGNhcmRPYmosIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIF9jbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlSXRlbShjYXJkT2JqKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5zcGxpY2UoXHJcbiAgICAgIHRoaXMuX2l0ZW1zLmZpbmRJbmRleChpdGVtID0+XHJcbiAgICAgICAgaXRlbS5faWQgPT0gY2FyZE9iai5faWRcclxuICAgICAgKSwgMSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtKGNhcmRPYmosIHNlcnZlciA9IGZhbHNlKSB7XHJcbiAgICBzZXJ2ZXIgP1xyXG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKHRoaXMuX3JlbmRlcmVyKGNhcmRPYmopKSA6XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKHRoaXMuX3JlbmRlcmVyKGNhcmRPYmopKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fY2xlYXIoKTtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5yZW5kZXJJdGVtKGl0ZW0sIHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRJdGVtcyhpdGVtcykge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKSB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpXHJcbiAgICAgIClcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0blRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbnB1dHNbMF0uZm9jdXMoKSwgNzAwKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCkge1xyXG4gICAgaXNMb2FkaW5nXHJcbiAgICAgID8gKHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0KVxyXG4gICAgICA6ICh0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0KTtcclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBkYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgY29uZmlnLCBmb3JtVmFsaWRhdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcblxyXG4vKuKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIFVTRVIg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZAqL1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX2ltYWdlXCIsIFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuLyrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBQQUdFIEJVVFRPTlMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAqL1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtdXBkYXRlXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBvY2N1cGF0aW9uIH0gPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLnNldElucHV0VmFsdWVzKHsgdGl0bGU6IG5hbWUsIGRlc2NyaXB0aW9uOiBvY2N1cGF0aW9uIH0pO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdC1wcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5lZGl0SW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UHJvZmlsZUltYWdlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtcHJvZmlsZS1pbWFnZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtY2FyZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbi8q4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWVXHJcbiDilIIgRk9STVMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZAqL1xyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjZWRpdC1wcm9maWxlLXBvcHVwXCIsXHJcbiAgaGFuZGxlUHJvZmlsZVNhdmVcclxuKTtcclxuY29uc3QgZWRpdFByb2ZpbGVJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjZWRpdC1wcm9maWxlLWltYWdlLXBvcHVwXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUltYWdlU2F2ZVxyXG4pO1xyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1wb3B1cFwiLCBoYW5kbGVBZGRDYXJkKTtcclxuY29uc3QgY29uZmlybURlbGV0ZVBvcHVwID0gbmV3IFBvcHVwQ29uZmlybShcclxuICBcIiNjb25maXJtLWRlbGV0ZS1wb3B1cFwiLFxyXG4gIGhhbmRsZURlbGV0ZUNhcmRcclxuKTtcclxuXHJcbi8q4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWVXHJcbiDilIIgQ0FSRFMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZAqL1xyXG5sZXQgY2FyZFNlY3Rpb247XHJcbmxldCB0YXJnZXRDYXJkO1xyXG5cclxuLyrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBFVkVOVCBIQU5ETEVSUyDilIJcclxuIOKVmOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCovXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtcG9wdXBcIik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXQocmVxdWVzdCwgcG9wdXAsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gIHBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSwgbG9hZGluZ1RleHQpO1xyXG4gIHJlcXVlc3QoKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICBwb3B1cC5yZXNldCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gcG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkKHsgdGl0bGUsIHVybCB9KSB7XHJcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAgIC5hZGRDYXJkKHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9KVxyXG4gICAgICAudGhlbihjYXJkT2JqID0+IGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZE9iaikpO1xyXG4gIH1cclxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGFkZENhcmRQb3B1cCk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlQ3JlYXRlQ2FyZChjYXJkKSB7XHJcbiAgcmV0dXJuIG5ldyBDYXJkKFxyXG4gICAgY2FyZCxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkuZ2V0RWxlbWVudCgpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAuZGVsZXRlQ2FyZCh0YXJnZXRDYXJkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkU2VjdGlvbi5kZWxldGVJdGVtKHRhcmdldENhcmQpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgfSlcclxuICB9XHJcbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBjb25maXJtRGVsZXRlUG9wdXAsIFwiRGVsZXRpbmcuLi5cIik7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xyXG4gIHRhcmdldENhcmQgPSBjYXJkLmdldERhdGEoKTtcclxuICBjb25maXJtRGVsZXRlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oKTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmQpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4oY2FyZC5nZXREYXRhKCkpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XHJcbiAgdGFyZ2V0Q2FyZCA9IGNhcmQuZ2V0RGF0YSgpO1xyXG4gIGFwaVxyXG4gICAgLnRvZ2dsZUxpa2UodGFyZ2V0Q2FyZClcclxuICAgIC50aGVuKCgpID0+IGNhcmQuc2V0TGlrZSgpKVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVJbWFnZVNhdmUoeyB1cmwgfSkge1xyXG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xyXG4gICAgcmV0dXJuIGFwaVxyXG4gICAgICAuc2V0VXNlclBpY3R1cmUodXJsKVxyXG4gICAgICAudGhlbigoKSA9PiB1c2VyLnNldFVzZXJJbWFnZSh1cmwpKTtcclxuICB9XHJcbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBlZGl0UHJvZmlsZUltYWdlUG9wdXApO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTYXZlKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcclxuICAgIHJldHVybiBhcGlcclxuICAgICAgLnNldFVzZXIoeyBuYW1lOiB0aXRsZSwgYWJvdXQ6IGRlc2NyaXB0aW9uIH0pXHJcbiAgICAgIC50aGVuKCh7IG5hbWUsIGFib3V0IH0pID0+IHVzZXIuc2V0VXNlckluZm8obmFtZSwgYWJvdXQpKTtcclxuICB9XHJcbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBlZGl0UHJvZmlsZVBvcHVwKTtcclxufVxyXG5cclxuLyrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBWQUxJREFUT1Ig4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAqL1xyXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKGNvbmZpZykge1xyXG4gIGNvbnN0IGZvcm1FbHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKV07XHJcbiAgZm9ybUVscy5mb3JFYWNoKChmb3JtRWwpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufVxyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVSTDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZjg4ZjdmMTMtZDA5NC00OTczLWFiMzctZjAzYzhkM2QwOWE1XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIEluaXRpYWxpemUgUGFnZSBmcm9tIFNlcnZlcjpcclxuYXBpXHJcbiAgLmdldFBhZ2VJbmZvKClcclxuICAudGhlbigoW2NhcmRBcnJheSwgdXNlckluZm9dKSA9PiB7XHJcbiAgICAvLyBVcGRhdGUgVXNlciBEZXRhaWxzIGZyb20gU2VydmVyXHJcbiAgICB1c2VyLnNldFVzZXJJbWFnZSh1c2VySW5mby5hdmF0YXIpO1xyXG4gICAgdXNlci5zZXRVc2VySW5mbyh1c2VySW5mby5uYW1lLCB1c2VySW5mby5hYm91dCk7XHJcblxyXG4gICAgLy8gVXBkYXRlIENhcmRzIGZyb20gU2VydmVyXHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7IGl0ZW1zOiBjYXJkQXJyYXksIHJlbmRlcmVyOiBoYW5kbGVDcmVhdGVDYXJkIH0sXHJcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcclxuICAgICk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9mSW1hZ2VFbGVtZW50U2VsZWN0b3IsIHByb2ZOYW1lRWxlbWVudFNlbGVjdG9yLCBvY2N1cGF0aW9uRWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wcm9mSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZJbWFnZUVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcm9mTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZk5hbWVFbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fb2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob2NjdXBhdGlvbkVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBvY2N1cGF0aW9uOiB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbWFnZSh1cmwpIHtcclxuICAgIHRoaXMuX3Byb2ZJbWFnZS5zcmMgPSB1cmw7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBvY2N1cGF0aW9uKSB7XHJcbiAgICB0aGlzLl9wcm9mTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50ID0gb2NjdXBhdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCkge1xyXG4gICAgaXNMb2FkaW5nXHJcbiAgICAgID8gKHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0KVxyXG4gICAgICA6ICh0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0KTtcclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgfVxyXG59XHJcbiIsIi8vIHRva2VuOiBmODhmN2YxMy1kMDk0LTQ5NzMtYWIzNy1mMDNjOGQzZDA5YTVcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVVJMID0gb3B0aW9ucy5iYXNlVVJMO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8qIENhcmQgQWRkIC8gUmVtb3ZlXHJcblxyXG4gIC8vLyBjYXJkUHJvcGVydGllczogb2JqZWN0IGNvbnRhaW5pbmcgJ25hbWUnIGFuZCAnbGluaycgcHJvcGVydGllc1xyXG4gIGFkZENhcmQoY2FyZFByb3BlcnRpZXMpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkUHJvcGVydGllcyksXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy8ke2NhcmQuX2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyogR0VUVEVSU1xyXG5cclxuICBnZXRDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFBhZ2VJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldENhcmRzKCksIHRoaXMuZ2V0VXNlcigpXSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8qIFNFVFRFUlNcclxuXHJcbiAgLy8vIHVzZXJJbmZvOiBvYmplY3QgY29udGFpbmluZyAnbmFtZScgYW5kICdhYm91dCcgcHJvcGVydGllc1xyXG4gIHNldFVzZXIodXNlckluZm8pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlckluZm8pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyUGljdHVyZShsaW5rKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVMaWtlKGNhcmQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzLyR7Y2FyZC5faWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGNhcmQuaXNMaWtlZCA/IFwiUFVUXCIgOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG4iXSwibmFtZXMiOlsiZm9ybVZhbGlkYXRvcnMiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9kYXRhIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9jYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9pbWFnZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwiZ2V0RGF0YSIsImdldEVsZW1lbnQiLCJfc2V0Q2FyZFZhbHVlcyIsIl9zZXRFdmVudExpc3RlbmVycyIsInNldExpa2UiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiX2hhbmRsZURlbGV0ZSIsImNhcmQiLCJfaGFuZGxlTGlrZSIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsIiwiX3NldHRpbmdzIiwiX2Zvcm1FbCIsIl9pbnB1dEZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvckVsIiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkIiwiaW5wdXRGaWVsZHMiLCJldmVyeSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2Rpc2FibGVCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiY2FyZE9iaiIsInVuc2hpZnQiLCJyZW5kZXJJdGVtIiwiX2NsZWFyIiwiaW5uZXJIVE1MIiwiZGVsZXRlSXRlbSIsInNwbGljZSIsImZpbmRJbmRleCIsIml0ZW0iLCJfaWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJhcHBlbmQiLCJwcmVwZW5kIiwic2V0SXRlbXMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ0biIsIl9zdWJtaXRCdG5UZXh0Iiwic2V0VGltZW91dCIsImZvY3VzIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJzZXRJbnB1dFZhbHVlcyIsInZhbHVlIiwidXNlciIsInByb2ZJbWFnZUVsZW1lbnRTZWxlY3RvciIsInByb2ZOYW1lRWxlbWVudFNlbGVjdG9yIiwib2NjdXBhdGlvbkVsZW1lbnRTZWxlY3RvciIsIl9wcm9mSW1hZ2UiLCJfcHJvZk5hbWUiLCJfb2NjdXBhdGlvbiIsImdldFVzZXJJbmZvIiwib2NjdXBhdGlvbiIsInNldFVzZXJJbWFnZSIsInVybCIsInNldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJlZGl0SW1hZ2VCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiZWRpdFByb2ZpbGVQb3B1cCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJlZGl0UHJvZmlsZUltYWdlUG9wdXAiLCJhZGRDYXJkUG9wdXAiLCJfcmVmMyIsImhhbmRsZVN1Ym1pdCIsImFwaSIsInNldFVzZXIiLCJhYm91dCIsInRoZW4iLCJfcmVmNCIsIl9yZWYyIiwic2V0VXNlclBpY3R1cmUiLCJhZGRDYXJkIiwiY2FyZFNlY3Rpb24iLCJjb25maXJtRGVsZXRlUG9wdXAiLCJkZWxldGVDYXJkIiwidGFyZ2V0Q2FyZCIsImltYWdlUG9wdXAiLCJfY2FwdGlvbkVsZW1lbnQiLCJyZXF1ZXN0IiwicG9wdXAiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImZpbmFsbHkiLCJoYW5kbGVDcmVhdGVDYXJkIiwidG9nZ2xlTGlrZSIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwib3B0aW9ucyIsIl9iYXNlVVJMIiwiYmFzZVVSTCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsImZldGNoIiwiY2FyZFByb3BlcnRpZXMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImdldENhcmRzIiwiZ2V0UGFnZUluZm8iLCJhbGwiLCJnZXRVc2VyIiwidXNlckluZm8iLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiX3JlZjUiLCJjYXJkQXJyYXkiXSwic291cmNlUm9vdCI6IiJ9