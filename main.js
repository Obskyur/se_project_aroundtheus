!function(){"use strict";const t={};class e{constructor(t,e,s){this._data=t,this._cardSelector=e,this._handleImageClick=s,this._cardElement=document.querySelector(`${this._cardSelector}`).content.firstElementChild.cloneNode(!0),this._imageElement=this._cardElement.querySelector(".card__image"),this._descriptionElement=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button")}getData(){return this._data}getElement(){return this._setCardValues(),this._setEventListeners(),this._cardElement}_handleDelete(t){t.target.closest(".card").remove()}_handleLike(t){t.target.classList.toggle("card__like-button_active")}_setCardValues(){this._imageElement.src=this._data.link,this._imageElement.alt=this._data.name,this._descriptionElement.textContent=this._data.name}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLike),this._deleteButton.addEventListener("click",this._handleDelete),this._imageElement.addEventListener("click",(()=>this._handleImageClick(this)))}}class s{constructor(t,e){this._settings=t,this._formEl=e,this._inputFields=[...e.querySelectorAll(this._settings.inputSelector)],this._submitButton=e.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._setEventListeners()}resetValidation(){this._toggleButtonState(this._inputFields,this._submitButton,this._settings),this._inputFields.forEach((t=>{this._hideInputError(t)}))}_showInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.add(this._settings.inputErrorClass),e.classList.add(this._settings.errorClass),e.textContent=t.validationMessage}_hideInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.errorClass),e.textContent=""}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalid(t){return!t.every((t=>t.validity.valid))}_setEventListeners(){this._formEl.addEventListener("submit",(t=>{t.preventDefault(),this._disableButton(this._submitButton,this._settings)})),this._inputFields.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalid(this._inputFields)?this._disableButton():this._enableButton()}}class n{constructor(t){this._popup=document.querySelector(t)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popup.addEventListener("mousedown",(t=>{(t.target.classList.contains("popup__close")||t.target.classList.contains("popup_opened"))&&this.close()}))}}class i extends n{constructor(t,e){super(t),this._popupForm=this._popup.querySelector(".popup__form"),this._inputs=this._popupForm.querySelectorAll(".popup__input"),this._handleFormSubmit=e,this.setEventListeners()}setEventListeners=()=>{super.setEventListeners(),this._popupForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close(),t.target.reset()}))};setInputValues(t){this._inputs.forEach((e=>{e.value=t[e.name]}))}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}}const o=new class{constructor(t,e){this._profName=document.querySelector(t),this._occupation=document.querySelector(e)}getUserInfo(){return{name:this._profName.textContent,occupation:this._occupation.textContent}}setUserInfo(t,e){this._profName.textContent=t,this._occupation.textContent=e}}(".profile__title",".profile__description"),r=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button");r.addEventListener("click",(()=>{const{name:e,occupation:s}=o.getUserInfo();l.open(),l.setInputValues({title:e,description:s}),t["edit-profile-form"].resetValidation()})),a.addEventListener("click",(()=>{c.open(),t["add-card-form"].resetValidation()}));const l=new i("#edit-profile-popup",(function(t){let{title:e,description:s}=t;o.setUserInfo(e,s)})),c=new i("#add-card-popup",(function(t){let{title:e,url:s}=t;const n={name:e,link:s};u.addItem(_(n))})),u=new class{constructor(t,e){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e),this.renderItems()}addItem(t){this._container.prepend(t)}_clear(){this._container.innerHTML=""}renderItems(){this._clear(),this._items.forEach((t=>{const e=this._renderer(t);this.addItem(e)}))}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],renderer:_},".cards__list"),p=new class extends n{constructor(t){super(t),this._imageElement=this._popup.querySelector(".popup__image"),this._captionElement=this._popup.querySelector(".popup__caption"),this.setEventListeners()}open(t){let{name:e,link:s}=t;super.open(),this._captionElement.textContent=e,this._imageElement.alt=e,this._imageElement.src=s}}("#image-popup");function _(t){return new e(t,"#card-template",d).getElement()}function d(t){p.open(t.getData())}var h;h={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},[...document.querySelectorAll(h.formSelector)].forEach((e=>{const n=new s(h,e),i=e.getAttribute("name");t[i]=n,n.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQVlELEVBQzNCQSxFQUFVbkYsa0JBQWtCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8q4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWVXHJcbiDilIIgQ0FSRFMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZAqL1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyBcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLyrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBWQUxJREFUT1Ig4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAqL1xyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIC8vKiBQYXNzZWQgdmFsdWVzOlxyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuXHJcbiAgICAvLyogUFJJVkFURSBET00gTUVNQkVSUzpcclxuICAgIC8vIERPTSBDYXJkIEVsZW1lbnRcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fY2FyZFNlbGVjdG9yfWApXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIC8vIERPTSBpbWFnZSBlbGVtZW50XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgLy8gRE9NIHRpdGxlIGVsZW1lbnRcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICAvLyBET00gbGlrZSBidXR0b24gZWxlbWVudFxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICAvLyBET00gZGVsZXRlIGJ1dHRvbiBlbGVtZW50XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXREYXRhKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fc2V0Q2FyZFZhbHVlcygpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGUoZXZlbnQpIHtcclxuICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmNhcmRcIikucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZShldmVudCkge1xyXG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfc2V0Q2FyZFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gTGlrZSBidXR0b25cclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xyXG5cclxuICAgIC8vIERlbGV0ZSBidXR0b25cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlKTtcclxuXHJcbiAgICAvLyBJbWFnZVxyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsO1xyXG4gICAgLy8gRmluZCBGb3JtIEZpZWxkc1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBbXHJcbiAgICAgIC4uLmZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXHJcbiAgICAgIHRoaXMuX2lucHV0RmllbGRzLFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24sXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIElOUFVUIEZJRUxEIEZVTkNUSU9OUyDilIJcclxuIOKVmOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCovXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZChpbnB1dEZpZWxkcykge1xyXG4gICAgcmV0dXJuICFpbnB1dEZpZWxkcy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBTdWJtaXQgTGlzdGVuZXJcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uLCB0aGlzLl9zZXR0aW5ncyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBvbiBJbnB1dCBMaXN0ZW5lclxyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIEJVVFRPTiBGVU5DVElPTlMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAqL1xyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZCh0aGlzLl9pbnB1dEZpZWxkcykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2VcIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKVxyXG4gICAgICApXHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGNvbmZpZywgZm9ybVZhbGlkYXRvcnMsIGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcblxyXG4vKuKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIFVTRVIg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZAqL1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuLyrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBQQUdFIEJVVFRPTlMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAqL1xyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBvY2N1cGF0aW9uIH0gPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyh7IHRpdGxlOiBuYW1lLCBkZXNjcmlwdGlvbjogb2NjdXBhdGlvbiB9KTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1jYXJkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLyrilZDilZDilZDilZDilZDilZDilZDilZVcclxuIOKUgiBGT1JNUyDilIJcclxuIOKVmOKVkOKVkOKVkOKVkOKVkOKVkOKVkCovXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNlZGl0LXByb2ZpbGUtcG9wdXBcIixcclxuICBoYW5kbGVQcm9maWxlU2F2ZVxyXG4pO1xyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1wb3B1cFwiLCBoYW5kbGVBZGRDYXJkKTtcclxuXHJcbi8q4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWVXHJcbiDilIIgQ0FSRFMg4pSCXHJcbiDilZjilZDilZDilZDilZDilZDilZDilZAqL1xyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGhhbmRsZUNyZWF0ZUNhcmQgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG4vKuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlVxyXG4g4pSCIEVWRU5UIEhBTkRMRVJTIOKUglxyXG4g4pWY4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQKi9cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1wb3B1cFwiKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmQoeyB0aXRsZSwgdXJsIH0pIHtcclxuICBjb25zdCBjYXJkID0ge1xyXG4gICAgbmFtZTogdGl0bGUsXHJcbiAgICBsaW5rOiB1cmwsXHJcbiAgfTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGhhbmRsZUNyZWF0ZUNhcmQoY2FyZCkpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZUNyZWF0ZUNhcmQoY2FyZCkge1xyXG4gIHJldHVybiBuZXcgQ2FyZChjYXJkLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spLmdldEVsZW1lbnQoKTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmQpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4oY2FyZC5nZXREYXRhKCkpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTYXZlKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICB1c2VyLnNldFVzZXJJbmZvKHRpdGxlLCBkZXNjcmlwdGlvbik7XHJcbn1cclxuXHJcbi8q4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWVXHJcbiDilIIgVkFMSURBVE9SIOKUglxyXG4g4pWY4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQKi9cclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcclxuICBjb25zdCBmb3JtRWxzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcildO1xyXG4gIGZvcm1FbHMuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHByb2ZOYW1lRWxlbWVudFNlbGVjdG9yLCBvY2N1cGF0aW9uRWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wcm9mTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZk5hbWVFbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fb2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob2NjdXBhdGlvbkVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBvY2N1cGF0aW9uOiB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIG9jY3VwYXRpb24pIHtcclxuICAgIHRoaXMuX3Byb2ZOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX29jY3VwYXRpb24udGV4dENvbnRlbnQgPSBvY2N1cGF0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMucmVuZGVySXRlbXMoKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBfY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fY2xlYXIoKTtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImZvcm1WYWxpZGF0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX2RhdGEiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfaW1hZ2VFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsImdldERhdGEiLCJnZXRFbGVtZW50IiwiX3NldENhcmRWYWx1ZXMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlRGVsZXRlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVtb3ZlIiwiX2hhbmRsZUxpa2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbCIsIl9zZXR0aW5ncyIsIl9mb3JtRWwiLCJfaW5wdXRGaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JFbCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZCIsImlucHV0RmllbGRzIiwiZXZlcnkiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9kaXNhYmxlQnV0dG9uIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsIm9wZW4iLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInNldElucHV0VmFsdWVzIiwidmFsdWUiLCJ1c2VyIiwicHJvZk5hbWVFbGVtZW50U2VsZWN0b3IiLCJvY2N1cGF0aW9uRWxlbWVudFNlbGVjdG9yIiwiX3Byb2ZOYW1lIiwiX29jY3VwYXRpb24iLCJnZXRVc2VySW5mbyIsIm9jY3VwYXRpb24iLCJzZXRVc2VySW5mbyIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJlZGl0UHJvZmlsZVBvcHVwIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFkZENhcmRQb3B1cCIsIl9yZWYyIiwiX3JlZiIsInVybCIsImNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJoYW5kbGVDcmVhdGVDYXJkIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsInByZXBlbmQiLCJfY2xlYXIiLCJpbm5lckhUTUwiLCJpdGVtIiwiaW1hZ2VQb3B1cCIsIl9jYXB0aW9uRWxlbWVudCIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==